type Query {
  # Auth
  me: User

  # Weddings
  userWeddings: [Wedding!]!
  weddings: [Wedding!]!
  wedding(id: ID!): Wedding
  weddingBySlug(slug: String!): Wedding
  searchWeddings(query: String!): [Wedding!]!

  # Wedding Details
  weddingDetail(weddingId: ID!): WeddingDetail

  # Guests
  guests(weddingId: ID!): [Guest!]!
  guestStats(weddingId: ID!): GuestStats!

  # Public
  publicWedding(slug: String!): Wedding
}

type Mutation {
  # Auth
  register(
    email: String!
    password: String!
    fullName: String!
    phone: String
  ): AuthPayload!
  login(email: String!, password: String!): AuthPayload!
  logout: Boolean!
  refreshToken(refreshToken: String!): AuthPayload!

  # Weddings
  createWedding(
    title: String!
    slug: String
    language: String
    weddingDate: String!
    bride: BrideGroomInput!
    groom: BrideGroomInput!
    themeSettings: ThemeSettingInput
  ): Wedding!
  updateWedding(id: ID!, title: String, slug: String, status: String): Wedding!
  deleteWedding(id: ID!): Wedding!
  publishWedding(id: ID!): Wedding!
  unpublishWedding(id: ID!): Wedding!

  # Wedding Details
  updateBride(weddingId: ID!, bride: BrideGroomInput!): WeddingDetail!
  updateGroom(weddingId: ID!, groom: BrideGroomInput!): WeddingDetail!
  addLoveStory(weddingId: ID!, story: LoveStoryInput!): WeddingDetail!
  updateLoveStory(
    weddingId: ID!
    storyId: ID!
    story: LoveStoryInput!
  ): WeddingDetail!
  deleteLoveStory(weddingId: ID!, storyId: ID!): WeddingDetail!
  addWeddingEvent(weddingId: ID!, event: WeddingEventInput!): WeddingDetail!
  updateWeddingEvent(
    weddingId: ID!
    eventId: ID!
    event: WeddingEventInput!
  ): WeddingDetail!
  deleteWeddingEvent(weddingId: ID!, eventId: ID!): WeddingDetail!

  # Guests
  addGuest(weddingId: ID!, guest: GuestInput!): Guest!
  updateGuest(id: ID!, guest: GuestInput!): Guest!
  deleteGuest(id: ID!): Guest!
  submitRSVP(weddingId: ID!, rsvp: RSVPInput!): Guest!

  # Bank Accounts
  addBankAccount(weddingId: ID!, bankAccount: BankAccountInput!): BankAccount!
  updateBankAccount(id: ID!, bankAccount: BankAccountInput!): BankAccount!
  deleteBankAccount(id: ID!): BankAccount!

  # Wishes
  addWish(weddingId: ID!, wish: WishInput!): Wish!
  approveWish(id: ID!): Wish!
  deleteWish(id: ID!): Wish!
}

# Types
type User {
  id: ID!
  email: String!
  fullName: String!
  phone: String
  avatar: String
  role: String!
  isActive: Boolean!
  lastLogin: String
  createdAt: String!
  updatedAt: String!
}

type Wedding {
  id: ID!
  userId: ID!
  slug: String!
  title: String!
  weddingDate: String!
  status: String!
  language: String!
  themeSettings: ThemeSettings!
  viewCount: Int!
  publishedAt: String
  createdAt: String!
  updatedAt: String!
  weddingDetail: WeddingDetail
}

type ThemeSettings {
  primaryColor: String!
  secondaryColor: String!
  fontHeading: String!
  fontBody: String!
  template: String!
  backgroundMusic: String
}

type BrideGroom {
  fullName: String!
  avatar: String
  shortBio: String
  familyInfo: String
  socialLinks: JSON
}

type WeddingEvent {
  id: ID!
  title: String!
  type: String!
  eventDate: String!
  startTime: String
  endTime: String
  address: String!
  locationLat: Float
  locationLng: Float
  mapEmbedUrl: String
  description: String
}

type LoveStory {
  id: ID!
  title: String!
  content: String!
  storyDate: String
  imageUrl: String
}

type WeddingDetail {
  id: ID!
  weddingId: ID!
  bride: BrideGroom!
  groom: BrideGroom!
  loveStories: [LoveStory!]!
  weddingEvents: [WeddingEvent!]!
}

type Guest {
  id: ID!
  weddingId: ID!
  fullName: String!
  email: String
  phone: String
  relationship: String
  numberOfGuests: Int!
  attendanceStatus: String!
  dietaryRestrictions: String
  message: String
  respondedAt: String
  tableNumber: String
  isActive: Boolean!
  createdAt: String!
  updatedAt: String!
}

type BankAccount {
  id: ID!
  weddingId: ID!
  bankName: String!
  accountNumber: String!
  accountHolder: String!
  branch: String
  qrCodeUrl: String
  isActive: Boolean!
  createdAt: String!
  updatedAt: String!
}

type Wish {
  id: ID!
  weddingId: ID!
  guestName: String!
  message: String!
  isApproved: Boolean!
  isActive: Boolean!
  createdAt: String!
  updatedAt: String!
}

type AuthPayload {
  user: User!
  accessToken: String!
  refreshToken: String!
}

type GuestStats {
  total: Int!
  confirmed: Int!
  pending: Int!
  declined: Int!
  totalGuests: Int!
}

# Inputs
input BrideGroomInput {
  fullName: String!
  avatar: String
  shortBio: String
  familyInfo: String
  socialLinks: JSON
}

input LoveStoryInput {
  title: String!
  content: String!
  storyDate: String
  imageUrl: String
}

input WeddingEventInput {
  title: String!
  type: String!
  eventDate: String!
  startTime: String
  endTime: String
  address: String!
  locationLat: Float
  locationLng: Float
  mapEmbedUrl: String
  description: String
}

input GuestInput {
  fullName: String!
  email: String
  phone: String
  relationship: String
  numberOfGuests: Int
  attendanceStatus: String
  dietaryRestrictions: String
  message: String
  tableNumber: String
}

input ThemeSettingInput {
  primaryColor: String
  secondaryColor: String
  fontHeading: String
  fontBody: String
  backgroundMusic: String
}

input RSVPInput {
  fullName: String!
  email: String
  phone: String
  numberOfGuests: Int!
  attendanceStatus: String!
  dietaryRestrictions: String
  message: String
}

input BankAccountInput {
  bankName: String!
  accountNumber: String!
  accountHolder: String!
  branch: String
}

input WishInput {
  guestName: String!
  message: String!
}

scalar JSON
